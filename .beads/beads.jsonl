{"id":"arti-1j9","content_hash":"062dff7e2444831f3cf0c8933a55136f998b076d873c0ca86b2b81999c7bef55","title":"Add revise_audio YAML configuration parsing to decode_yaml/request","description":"Extend YAML config structure:\n- Add ReviseAudio struct to decode_yaml/request/model.go\n- Support subcategories (boolean flags) for selected tools:\n  * revise_audio:rvc:yes (voice conversion)\n  * revise_audio:prosody_dsp:yes (DSP prosody matching)\n- Support verse selection:\n  * List of verse references (e.g., [MAT.1.5, MAT.1.10])\n  * Or reference to change list file\n- Follow existing pattern from other config sections (audio_proof, compare, etc.)\n- Add validation in decode_yaml/depend.go","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-12T15:09:52.098212-07:00","updated_at":"2025-12-12T15:09:52.098212-07:00","source_repo":".","dependencies":[{"issue_id":"arti-1j9","depends_on_id":"arti-z97","type":"blocks","created_at":"2025-12-12T15:09:52.101429-07:00","created_by":"daemon"}]}
{"id":"arti-1r4","content_hash":"3a5ebe2fa32b8fb04d6c51c044a09ce5f645d24ad72ec86af2365c31cc9c8dc7","title":"Generate revised HTML report for review (old vs new audio)","description":"HTML report generator for revised audio:\n- Similar structure to existing audio_proof HTML reports\n- Show: verse reference, original text, revised text (if changed)\n- Audio playback: original version + revised version\n- Highlight which words were replaced\n- Show source of replacement (book.chapter.verse, actor ID)\n- Include before/after waveform visualization (optional, nice-to-have)\n- Make it easy to review changes and validate quality\n- Output: standalone HTML file (like existing reports)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-12T15:09:20.223149-07:00","updated_at":"2025-12-12T15:09:20.223149-07:00","source_repo":".","dependencies":[{"issue_id":"arti-1r4","depends_on_id":"arti-z97","type":"blocks","created_at":"2025-12-12T15:09:20.227296-07:00","created_by":"daemon"}]}
{"id":"arti-3ky","content_hash":"a1f0209e97c0f7cdb12e1d7727f21585e017b56280fddf236a45660b8c087a36","title":"Web UI integration: support revise_audio job submission via controller/web","description":"Extend web interface for revise_audio:\n- Add revise_audio section to job submission form\n- Allow upload of revision list file (JSON)\n- Allow inline verse/word specification\n- Display status/progress for revise_audio jobs\n- Download links for:\n  * Revised chapter audio files\n  * Revised HTML report\n- Integration with existing web UI patterns\n- User-friendly error messages\n- Documentation/help text for non-technical users","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-12T15:10:07.019212-07:00","updated_at":"2025-12-12T15:10:07.019212-07:00","source_repo":".","dependencies":[{"issue_id":"arti-3ky","depends_on_id":"arti-z97","type":"blocks","created_at":"2025-12-12T15:10:07.021233-07:00","created_by":"daemon"}]}
{"id":"arti-44l","content_hash":"e0dc99c87850f0675b36b1b3ba8897561a380a1e6b6f1f15188c5a84590be4b0","title":"Implement corpus search: find replacement words/phrases in existing recordings","description":"Search logic for finding replacement snippets:\n- Input: list of words/phrases to find (from revision request)\n- Search strategy (in priority order):\n  1. Same Actor ID + exact text match\n  2. Same Actor ID + normalized text match\n  3. Same Person + exact text match\n  4. Different speaker + exact text match\n- Search scope (fallback order): whole corpus, same book, nearby verses\n- Return: candidate snippets with metadata (Actor, Person, book, chapter, verse, word timestamps, quality scores)\n- Leverage existing Word table with timestamps for exact word boundaries","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-12T15:08:53.731153-07:00","updated_at":"2025-12-12T15:08:53.731153-07:00","source_repo":".","dependencies":[{"issue_id":"arti-44l","depends_on_id":"arti-z97","type":"blocks","created_at":"2025-12-12T15:08:53.739051-07:00","created_by":"daemon"}]}
{"id":"arti-62u","content_hash":"71476773f93b08d5db522a34e9db4ee16ffe38e84cdb7bb937b9fa3a09c283e3","title":"Testing and validation: end-to-end revise_audio workflow","description":"Comprehensive testing:\n- Test with real datasets (minority languages)\n- Validate voice conversion quality (same speaker, different speaker cases)\n- Validate prosody matching (natural-sounding transitions)\n- Test edge cases:\n  * Multiple words in sequence\n  * Overlapping revisions\n  * Words not found in corpus\n  * Same word, different contexts\n- Performance testing (large chapters, many revisions)\n- User acceptance testing with non-technical users\n- Document known limitations and best practices\n- Create test datasets for regression testing","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-12T15:10:10.937379-07:00","updated_at":"2025-12-12T15:10:10.937379-07:00","source_repo":".","dependencies":[{"issue_id":"arti-62u","depends_on_id":"arti-z97","type":"blocks","created_at":"2025-12-12T15:10:10.93835-07:00","created_by":"daemon"}]}
{"id":"arti-6dt","content_hash":"deeaa0303db987334fdff7cc6dfd648d1e81d3b0c4649c0d35371dffad770e2d","title":"Enhance audio_proof HTML report: add selection UI for words/verses to revise","description":"Modify HTML report to allow selection:\n- Add checkboxes/selection UI for each verse/word discrepancy\n- Allow selecting entire verses or individual words within verses\n- Visual highlighting of selected items\n- Button to 'Export Revision List' or 'Create Revision Job'\n- Export format: JSON file with selected revisions:\n  * Verse references\n  * Word indices (if word-level)\n  * Original text, expected text\n- Store selections client-side (localStorage) for user convenience\n- Non-technical friendly UI (clear labels, instructions)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-12T15:09:56.106946-07:00","updated_at":"2025-12-12T15:09:56.106946-07:00","source_repo":".","dependencies":[{"issue_id":"arti-6dt","depends_on_id":"arti-z97","type":"blocks","created_at":"2025-12-12T15:09:56.109185-07:00","created_by":"daemon"}]}
{"id":"arti-7qf","content_hash":"28c544a8a0436d2fd4f318a101d3e5f22d4eb88f2996360b4274779923a3eb6f","title":"Implement audio snippet extraction from chapter files","description":"Extract word/phrase audio snippets:\n- Input: word-level timestamps from corpus search results\n- Extract audio segments from chapter files using timestamps\n- Handle word sequences (multiple words that form a phrase)\n- Add padding/context (e.g., 0.1s before/after for natural boundaries)\n- Output: audio snippets as temporary files (WAV format)\n- Reuse existing audio file handling from input package","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-12T15:08:57.12953-07:00","updated_at":"2025-12-12T15:08:57.12953-07:00","source_repo":".","dependencies":[{"issue_id":"arti-7qf","depends_on_id":"arti-z97","type":"blocks","created_at":"2025-12-12T15:08:57.132369-07:00","created_by":"daemon"}]}
{"id":"arti-9j0","content_hash":"0f324e07c8471fa5aa35907d7b9e88fca3eea7e182c10005493eacf37a035443","title":"Implement change list file format and parsing","description":"Standardized format for revision requests:\n- JSON format for revision list:\n  * Dataset reference\n  * List of revisions (verse/word references)\n  * Optional: word mappings (original -\u003e replacement)\n- Support both:\n  * File-based input (user uploads/specifies file)\n  * Inline YAML specification\n- Parser to convert to internal RevisionRequest structure\n- Validation: ensure verse references are valid, words exist in corpus\n- Integration with existing Script/Word table queries","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-12T15:10:00.447119-07:00","updated_at":"2025-12-12T15:10:00.447119-07:00","source_repo":".","dependencies":[{"issue_id":"arti-9j0","depends_on_id":"arti-z97","type":"blocks","created_at":"2025-12-12T15:10:00.449623-07:00","created_by":"daemon"}]}
{"id":"arti-a2g","content_hash":"8f03ec02831456efdd3825e904ceececd5085e3b96d24c4cd2b007449c56bdfc","title":"Implement DSP-based prosody matching (F0, energy, timing)","description":"Prosody adjustment using DSP (Phase 1, simplest approach):\n- Extract prosody features from context (surrounding verses in target chapter):\n  * F0 (pitch) contour\n  * Energy/loudness envelope  \n  * Speaking rate/timing\n- Adjust extracted snippet to match:\n  * Pitch shifting to match F0 contour\n  * Time-stretching to match speaking rate\n  * Loudness normalization\n- Use librosa or similar for audio manipulation\n- Keep natural-sounding (avoid artifacts)\n- This is the \"boring but important DSP\" mentioned in notes","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-12T15:09:06.465145-07:00","updated_at":"2025-12-12T15:09:06.465145-07:00","source_repo":".","dependencies":[{"issue_id":"arti-a2g","depends_on_id":"arti-z97","type":"blocks","created_at":"2025-12-12T15:09:06.470407-07:00","created_by":"daemon"}]}
{"id":"arti-b0j","content_hash":"cb194b7de2711add54bf71a9436e4cf27dda8117daaa482948cb558ef2c31e2b","title":"Integrate revise_audio into controller workflow","description":"Add revise_audio processing to controller:\n- Add ReviseAudio method to controller/controller.go\n- Process revise_audio config section (similar to audio_proof, compare)\n- Coordinate with existing modules:\n  * Read from database (Script/Word tables)\n  * Use input package for audio file access\n  * Use output package for revised audio files\n  * Generate HTML reports\n- Handle job dependencies: requires audio_proof to have run first\n- Error handling and logging\n- Status reporting for long-running operations","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-12T15:10:03.741949-07:00","updated_at":"2025-12-12T15:10:03.741949-07:00","source_repo":".","dependencies":[{"issue_id":"arti-b0j","depends_on_id":"arti-z97","type":"blocks","created_at":"2025-12-12T15:10:03.744408-07:00","created_by":"daemon"}]}
{"id":"arti-bue","content_hash":"69fa444cb4d6130e307d9ed838b8c7a59041a3ef33e32d135ae78b51119bfe3d","title":"Implement audio stitching: replace segments in chapter audio","description":"Seamless audio replacement:\n- Input: original chapter audio + list of (start_ts, end_ts, replacement_audio)\n- Replace segments with crossfading at boundaries\n- Crossfade duration: ~50-100ms for natural transitions\n- Maintain chapter timing (don't shift later verses)\n- Handle overlapping replacements\n- Output: revised chapter audio file\n- Preserve original as backup\n- Validate duration matches (within tolerance)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-12T15:09:10.87399-07:00","updated_at":"2025-12-12T15:09:10.87399-07:00","source_repo":".","dependencies":[{"issue_id":"arti-bue","depends_on_id":"arti-z97","type":"blocks","created_at":"2025-12-12T15:09:10.876183-07:00","created_by":"daemon"}]}
{"id":"arti-c12","content_hash":"e7c905373c4299208fa87811ad67a5c222cc83e4af2fd1ad8c8c703db3987b9a","title":"Research and select voice conversion \u0026 prosody matching tooling stack","description":"Research available options and make recommendations:\n- Voice conversion: RVC (existing FCBH system) vs OpenVoice vs other\n- Prosody matching: DSP-based (F0/energy) vs neural approaches\n- Prioritize: easiest/working solution first, can upgrade later\n- Document decision with rationale in revise_audio/ directory\n- Consider Go integration vs Python module (similar to existing MMS pattern)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-12T15:08:46.987449-07:00","updated_at":"2025-12-12T15:08:46.987449-07:00","source_repo":".","dependencies":[{"issue_id":"arti-c12","depends_on_id":"arti-z97","type":"blocks","created_at":"2025-12-12T15:08:46.989825-07:00","created_by":"daemon"}]}
{"id":"arti-lmh","content_hash":"3611c2a129972a243adce7b24763203825d0f493b6ad72e3122a57b02460f694","title":"Integrate voice conversion (Python module): RVC-based speaker matching","description":"Voice conversion integration:\n- Create Python module for VC (similar to mms/ adapter pattern)\n- Use existing FCBH RVC infrastructure as starting point\n- Accept: source audio + target speaker embedding\n- Return: converted audio (same speaker identity)\n- Handle cases: same speaker (passthrough), different speaker (VC needed)\n- Extract speaker embeddings from target verse context\n- Document integration approach (Go -\u003e Python via subprocess/stdin-stdout or other)","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-12T15:09:01.408446-07:00","updated_at":"2025-12-12T15:09:01.408446-07:00","source_repo":".","dependencies":[{"issue_id":"arti-lmh","depends_on_id":"arti-z97","type":"blocks","created_at":"2025-12-12T15:09:01.410545-07:00","created_by":"daemon"}]}
{"id":"arti-wug","content_hash":"46393dc9c428bab891afdc8cf998c7008e152c4e366627a883226c57f31a1780","title":"Create revise_audio directory structure and Go module foundation","description":"Set up basic structure:\n- Create revise_audio/ package directory\n- Define core data structures (RevisionRequest, SnippetCandidate, etc.)\n- Set up integration points with db package (Script, Word tables)\n- Create interfaces for VC and prosody modules\n- Basic error handling and logging","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-12T15:08:49.509518-07:00","updated_at":"2025-12-12T15:08:49.509518-07:00","source_repo":".","dependencies":[{"issue_id":"arti-wug","depends_on_id":"arti-z97","type":"blocks","created_at":"2025-12-12T15:08:49.510738-07:00","created_by":"daemon"}]}
{"id":"arti-z97","content_hash":"4785fc4ac1a8099d62cec24b0c0cbd31c929d1def3c0482d2ffeee99baa187b3","title":"Audio Revision System: Verse-level find-and-replace with voice cloning and prosody matching","description":"Epic: Build complete audio revision system for FCBH workflow. Users identify verses/words needing correction from audio_proof HTML reports, system finds replacement snippets in corpus, applies voice conversion and prosody matching, outputs revised chapter audio files + review HTML report.\n\nWorkflow:\n1. User runs audio_proof with html_report\n2. User identifies verses/words to revise from HTML report\n3. System searches corpus for replacement snippets (prioritizing same speaker)\n4. Extracts audio snippets\n5. Applies voice conversion if needed (different speaker)\n6. Adjusts prosody to match context\n7. Stitches into revised chapter audio\n8. Generates HTML report for review\n\nPhase 1: Manual experiments (build infrastructure)\nPhase 2: YAML integration + web UI","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-12T15:08:35.702225-07:00","updated_at":"2025-12-12T15:08:35.702225-07:00","source_repo":".","comments":[{"id":1,"issue_id":"arti-z97","author":"jrstear","text":"Phase 1 Dependency Flow:\n1. arti-c12 (Research tooling) - First step\n2. arti-wug (Directory structure) - Depends on research\n3. arti-44l (Corpus search) - Depends on structure\n4. arti-7qf (Snippet extraction) - Depends on search\n5. arti-lmh (Voice conversion) - Depends on research + structure (can parallel with 44l)\n6. arti-a2g (Prosody matching) - Depends on extraction + VC\n7. arti-bue (Audio stitching) - Depends on prosody\n8. arti-zh7 (CLI tool) - Depends on stitching\n9. arti-1r4 (HTML report) - Depends on stitching\n\nPhase 2 (YAML integration):\n- Depends on Phase 1 completion\n- arti-1j9, arti-6dt, arti-9j0 can proceed in parallel\n- arti-b0j depends on YAML parsing + change list\n- arti-3ky depends on controller integration\n- arti-62u is final validation step","created_at":"2025-12-12T22:10:20Z"}]}
{"id":"arti-zh7","content_hash":"422e09e4c80d087aa166d960d38266175ade12249561539825da3822dc1dfbd9","title":"Create manual CLI tool for testing audio revision workflow","description":"Command-line tool for Phase 1 testing:\n- Accept: dataset name, verse references, words to replace\n- Example: ./revise_audio --dataset Test1 --verse MAT.1.5 --words \"love\" --target-actor 1\n- Run full pipeline: search -\u003e extract -\u003e VC -\u003e prosody -\u003e stitch\n- Output: revised chapter audio + metadata JSON\n- Allow testing individual steps in isolation\n- Useful for validating each component before YAML integration","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-12T15:09:15.335695-07:00","updated_at":"2025-12-12T15:09:15.335695-07:00","source_repo":".","dependencies":[{"issue_id":"arti-zh7","depends_on_id":"arti-z97","type":"blocks","created_at":"2025-12-12T15:09:15.338514-07:00","created_by":"daemon"}]}
